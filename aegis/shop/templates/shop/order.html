{% extends 'main/layout.html' %}
{% load static %}

{% block title %}
Корзина магазина | ФК Аегис
{% endblock %}

  {% block css %}
<link href="{% static 'shop/css/order.css' %}" rel="stylesheet" xmlns="http://www.w3.org/1999/html">
  {% endblock %}

{% block content %}



<div class="container" style="margin-top: 20px;">

<div class="d-md-flex flex-md-equal w-100 my-md-3 ps-md-3">
  <div class="me-md-3 pt-3 px-3 pt-md-5 px-md-5">
<h2 class="hWord">Корзина покупок</h2>
    {% if purchases %}
    {% for pur in purchases %}

<div class="row mb-1" >
<div class="col-md-15" >
      <div class=" g-0 border rounded overflow-hidden flex-md-row mb-4 shadow-sm h-md-250 position-relative">
        <div style=" float: left;">
            <img  height="230px"  src="{{ pur.product.photo.url }}">
        </div>
        <div class="col p-4 d-flex flex-column position-static">
          <div class="mb-0 namekit">ФК Аегис {{ pur.product.cat }} {{ pur.product.kind }} {{ pur.product.year|date:'Y' }}</div>
          <p class="mb-auto">Размер: {{ pur.size }}</p>
          <p>Количество: {{ pur.quantity }}</p>
          <p>Цена за штуку: {{ pur.product.price }} ₽</p>
          <div class="mb-1 price">{{ pur.total_price }} ₽</div>
          <div class=" gap-2 d-flex justify-content-end">
            <a href="{% url 'remove' pur.pk user.pk %}">
            <button type="button" class="btn btn-outline-danger" style="width: 100px; ">Удалить</button>
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>

    {% endfor %}
      {% else %}
      <div class=" g-0 border rounded overflow-hidden flex-md-row mb-4 shadow-sm h-md-250 position-relative">
        <div class="col p-4 d-flex flex-column position-static">
          <div class="mb-0 order">КОРЗИНА ПУСТА</div>
        </div>
      </div>
  {% endif %}
  </div>

      {% if purchases %}
  <aside class="" style="margin-top: 50px; margin-left: auto;">
  <div class="me-md-3 pt-3 px-3 pt-md-5 px-md-5" style="background: rgba(128, 128, 128, 0.1); padding-bottom: 20px">
      <div class="order" style="margin-bottom: 20px">Итог </div>
    <div class="d-flex justify-content-between"><div style="font: small-caps 15px sans-serif;">Конечная стоимость:</div><div class="price">{{ total_price }} ₽</div></div>
      <form method="post">
        {% csrf_token %}
            <div class="form-floating" style="margin-top: 20px;"> Номер телефона:
            {{ form.phone_number }}
            </div>
          <span>{{ error }}</span>
      <button type="submit" class="btn-secondary bttn">Оформить заказ</button>
      </form>
  </div>
    </aside>
  {% endif %}
</div>
</div>
{% endblock %}