{% extends 'main/layout.html' %}
{% load static %}

{% block title %}
{{ news.title }} | ФК Аегис
{% endblock %}

{% block css %}
    <link href="{% static 'main/css/one_news.css' %}" rel="stylesheet">
    <link href="{% static 'main/css/news_mini.css' %}" rel="stylesheet">
{% endblock %}

{% block content %}
    <div class="container border-bottom">
        <p class="text-center title" style="margin-top: 20px; margin-bottom: 30px">{{ news.title }}</p>
        <img class="shadow rounded mx-auto d-block img-new" style="margin-bottom: 30px;" src="{{ news.img.url }}">
    
    <div class="news-block" style="margin: auto">
      <p class="publisher">Автор поста: {{ news.publisher }}</p>
        <p class="datetime">{{ news.date_time }}</p>
        {% if request.user.is_superuser %}     
        <div class="d-flex justify-content-end">
          <a href="" class="linkM" data-bs-toggle="modal" data-bs-target="#exampleModal">
          <button type="button" class="btn btn-outline-danger" style="width: 80px; ">Удалить</button>
          </a>
         <a href="{% url 'upd_new' news.slug %}">
          <button type="button" class="btn btn-outline-success" style="width: 130px; ">Редактировать</button>
          </a>
        </div>
        {% endif %}
        <div class="border-top" style="margin-bottom: 20px;"></div>
        <p style="white-space: pre-wrap;">{{ news.content }}</p>
    </div>

    </div>

    <div class="text-center" style="margin-top: 20px;"><h2>Последние новости</h2></div>
    <div class="container">   
        <div class="row" style="margin-top: 20px;">
          {% for n in three_news %}
          <div class="col">
            <a href="{% url 'news' n.slug %}">
                  <div class="card shadow-sm nw-block">         
                      <img class="rounded-1" width="100%" height="225px"  src="{{ n.img.url }}">
                  
                  <a style="text-decoration:none" href="{% url 'news' n.slug %}">
                    
                  <div class="card-body">
                    <p class="card-text title-mini">{{ n.title }}</p>
                    <div class="position-absolute bottom-0 end-0 datetime-mini">
                      <p>{{ n.date_time }}</p>
                    </div>
                  </div>
                </a>  
              </div>           
            </a>
          </div>
          {% endfor %} 
    </div>
    </div>

    <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <h1 class="modal-title fs-5" id="exampleModalLabel">Внимание!</h1>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            Вы точно хотите удалить новость?
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Отмена</button>
            <button id="del" type="button" class="btn btn-danger">Удалить</button>
          </div>
        </div>
      </div>
    </div>
    
    <script>
      document.querySelector('#del').onclick = function(e) {
        location.replace("{% url 'del_new' news.id %}")
        }
    </script>
{% endblock %}
